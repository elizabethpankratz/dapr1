% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{article}
\usepackage{amsmath,amssymb}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math} % this also loads fontspec
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
\usepackage{lmodern}
\ifPDFTeX\else
  % xetex/luatex font selection
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\usepackage[margin=1in]{geometry}
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering
\usepackage{booktabs}
\usepackage{longtable}
\usepackage{array}
\usepackage{multirow}
\usepackage{wrapfig}
\usepackage{float}
\usepackage{colortbl}
\usepackage{pdflscape}
\usepackage{tabu}
\usepackage{threeparttable}
\usepackage{threeparttablex}
\usepackage[normalem]{ulem}
\usepackage{makecell}
\usepackage{xcolor}
\ifLuaTeX
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same}
\hypersetup{
  pdftitle={DapR1: Notes on the Live R Session, Week 8},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}

\title{DapR1: Notes on the Live R Session, Week 8}
\author{}
\date{\vspace{-2.5em}}

\begin{document}
\maketitle

This week, we will be picking up where we left off the last time. We'll
continue working with probability using operators. We'll also talk about
writing a clean report using Markdown, including learning about in-line
R coding and notation.

First, let's load the tidyverse and create our sample space. We'll also
recreate our sample data from last week. Because we used the
\emph{set.seed()} function last week, we can use the same seed value to
make R generate the same data we used last week.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(tidyverse)}
\NormalTok{skittles }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{\textquotesingle{}red\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}green\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}yellow\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}purple\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}orange\textquotesingle{}}\NormalTok{)}

\FunctionTok{set.seed}\NormalTok{(}\DecValTok{2210}\NormalTok{)}
\NormalTok{s5 }\OtherTok{\textless{}{-}} \FunctionTok{tibble}\NormalTok{(}\AttributeTok{Obs =} \FunctionTok{sample}\NormalTok{(skittles, }\DecValTok{5}\NormalTok{, }\AttributeTok{replace =}\NormalTok{ T))}
\NormalTok{s100 }\OtherTok{\textless{}{-}} \FunctionTok{tibble}\NormalTok{(}\AttributeTok{Obs =} \FunctionTok{sample}\NormalTok{(skittles, }\DecValTok{100}\NormalTok{, }\AttributeTok{replace =}\NormalTok{ T))}
\end{Highlighting}
\end{Shaded}

Although we're working with character data in this example, you can also
create sample data with numeric values. Consider an example where you
want to calculate the probability of rolling an even number on a die.
You could use \emph{seq()} function, which allows you to generate
sequences of numbers, to create your sample space and your events of
interest:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{dSp }\OtherTok{\textless{}{-}} \FunctionTok{seq}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{6}\NormalTok{)}
\NormalTok{dEv }\OtherTok{\textless{}{-}} \FunctionTok{seq}\NormalTok{(}\DecValTok{2}\NormalTok{, }\DecValTok{6}\NormalTok{, }\AttributeTok{by =} \DecValTok{2}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{joint-probability}{%
\subsection{Joint Probability}\label{joint-probability}}

With joint probability, we're interested in looking at the probability
of multiple outcomes. For example, if we were to select a skittle from
the bag, what's the likelihood we would select a yellow \textbf{OR} a
purple?

Because these events are mutually exclusive, we would expect their joint
probability to be the sum of their individual probabilities.

\(p(yellow\cup purple)=.20 + .20 = .40\)

Here, we'll review two ways you can specify multiple events of interest
and use these methods to compute joint probability in your sample.

\hypertarget{the-and-and-or-operators}{%
\subsubsection{The AND and OR
operators}\label{the-and-and-or-operators}}

Two operators that may be used for specifying multiple conditions are
\textbf{\&} and \textbf{\textbar{}}. As you might expect, \textbf{\&}
refers to \emph{`and'}. It allows you to specify values that meet
\emph{all} given conditions. The \textbf{\textbar{}} operator stands for
\emph{`or'} and allows you to specify values that meet \emph{any} of the
given conditions.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{successes }\OtherTok{\textless{}{-}}\NormalTok{ s100 }\SpecialCharTok{==} \StringTok{\textquotesingle{}yellow\textquotesingle{}}\SpecialCharTok{|}\NormalTok{s100 }\SpecialCharTok{==} \StringTok{\textquotesingle{}purple\textquotesingle{}}
\NormalTok{failures }\OtherTok{\textless{}{-}}\NormalTok{ s100 }\SpecialCharTok{!=} \StringTok{\textquotesingle{}yellow\textquotesingle{}} \SpecialCharTok{\&}\NormalTok{ s100 }\SpecialCharTok{!=} \StringTok{\textquotesingle{}purple\textquotesingle{}}

\FunctionTok{sum}\NormalTok{(successes)}\SpecialCharTok{/}\NormalTok{(}\FunctionTok{sum}\NormalTok{(successes) }\SpecialCharTok{+} \FunctionTok{sum}\NormalTok{(failures))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 0.4
\end{verbatim}

\hypertarget{in-or-is.element}{%
\subsubsection{\%in\% or is.element()}\label{in-or-is.element}}

You can get the same results using the \textbf{\%in\%} operator. This
operator can be used to determine whether a given element (or values
from a vector of elements) is found in a dataset or vector. Also, note
the use of another operator. The \textbf{!} operator stands for
\emph{`not'} and allows you to select values that do not meet a
specified condition.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{events }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{\textquotesingle{}purple\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}yellow\textquotesingle{}}\NormalTok{)}
\NormalTok{successes }\OtherTok{\textless{}{-}}\NormalTok{ s100}\SpecialCharTok{$}\NormalTok{Obs }\SpecialCharTok{\%in\%}\NormalTok{ events}
\NormalTok{failures }\OtherTok{\textless{}{-}} \SpecialCharTok{!}\NormalTok{s100}\SpecialCharTok{$}\NormalTok{Obs }\SpecialCharTok{\%in\%}\NormalTok{ events}

\FunctionTok{sum}\NormalTok{(successes)}\SpecialCharTok{/}\NormalTok{(}\FunctionTok{sum}\NormalTok{(successes) }\SpecialCharTok{+} \FunctionTok{sum}\NormalTok{(failures))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 0.4
\end{verbatim}

You can also use the \textbf{is.element()} function in the same way.
\emph{is.element(x, y)} is identical to \emph{x \%in\% y}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{is.element}\NormalTok{(s100}\SpecialCharTok{$}\NormalTok{Obs, events)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   [1] FALSE  TRUE  TRUE FALSE FALSE  TRUE FALSE  TRUE  TRUE FALSE  TRUE  TRUE
##  [13] FALSE  TRUE FALSE FALSE FALSE  TRUE FALSE  TRUE  TRUE FALSE  TRUE FALSE
##  [25] FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE FALSE
##  [37]  TRUE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE
##  [49] FALSE FALSE FALSE  TRUE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE
##  [61] FALSE  TRUE FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE FALSE  TRUE  TRUE
##  [73]  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE
##  [85] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE FALSE
##  [97] FALSE  TRUE FALSE FALSE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{successes }\OtherTok{\textless{}{-}} \FunctionTok{is.element}\NormalTok{(s100}\SpecialCharTok{$}\NormalTok{Obs, events)}
\NormalTok{failures }\OtherTok{\textless{}{-}} \SpecialCharTok{!}\FunctionTok{is.element}\NormalTok{(s100}\SpecialCharTok{$}\NormalTok{Obs, events)}
\FunctionTok{sum}\NormalTok{(successes)}\SpecialCharTok{/}\NormalTok{(}\FunctionTok{sum}\NormalTok{(successes) }\SpecialCharTok{+} \FunctionTok{sum}\NormalTok{(failures))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 0.4
\end{verbatim}

Now, let's compute the probability of selecting a yellow \textbf{AND} a
purple skittle in two selections.

To do this, we would use we use the following formula:

\(p(yellow\cap purple)=.20*.20 =.04\)

Let's check to see if our data follow the expected result. To do this,
we'll need to add a new column that represents the second skittle
selection:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{s100}\SpecialCharTok{$}\NormalTok{Obs2 }\OtherTok{\textless{}{-}} \FunctionTok{sample}\NormalTok{(skittles, }\DecValTok{100}\NormalTok{, }\AttributeTok{replace =}\NormalTok{ T)}
\FunctionTok{head}\NormalTok{(s100)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6 x 2
##   Obs    Obs2  
##   <chr>  <chr> 
## 1 green  orange
## 2 yellow orange
## 3 yellow orange
## 4 orange purple
## 5 red    purple
## 6 yellow purple
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{successes }\OtherTok{\textless{}{-}}\NormalTok{ (s100}\SpecialCharTok{$}\NormalTok{Obs}\SpecialCharTok{==}\StringTok{\textquotesingle{}purple\textquotesingle{}}\SpecialCharTok{\&}\NormalTok{s100}\SpecialCharTok{$}\NormalTok{Obs2}\SpecialCharTok{==}\StringTok{\textquotesingle{}yellow\textquotesingle{}}\NormalTok{)}\SpecialCharTok{|}\NormalTok{(s100}\SpecialCharTok{$}\NormalTok{Obs}\SpecialCharTok{==}\StringTok{\textquotesingle{}yellow\textquotesingle{}}\SpecialCharTok{\&}\NormalTok{s100}\SpecialCharTok{$}\NormalTok{Obs2}\SpecialCharTok{==}\StringTok{\textquotesingle{}purple\textquotesingle{}}\NormalTok{)}
\NormalTok{failures }\OtherTok{\textless{}{-}} \SpecialCharTok{!}\NormalTok{successes}

\FunctionTok{sum}\NormalTok{(successes)}\SpecialCharTok{/}\NormalTok{(}\FunctionTok{sum}\NormalTok{(successes) }\SpecialCharTok{+} \FunctionTok{sum}\NormalTok{(failures))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 0.05
\end{verbatim}

You can also look at the proportion table for multiple events:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{s100 }\SpecialCharTok{\%\textgreater{}\%}
\NormalTok{  table }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{prop.table}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##         Obs2
## Obs      green orange purple  red yellow
##   green   0.01   0.05   0.01 0.05   0.06
##   orange  0.04   0.05   0.06 0.02   0.03
##   purple  0.03   0.08   0.06 0.02   0.02
##   red     0.06   0.04   0.05 0.04   0.03
##   yellow  0.06   0.06   0.03 0.03   0.01
\end{verbatim}

Note that you can sum the appropriate locations in the proportion table
to get the corresponding probability.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{pTab }\OtherTok{\textless{}{-}}\NormalTok{ s100 }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{table}\NormalTok{() }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{prop.table}\NormalTok{()}

\NormalTok{pTab[}\StringTok{\textquotesingle{}purple\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}yellow\textquotesingle{}}\NormalTok{] }\SpecialCharTok{+}\NormalTok{ pTab[}\StringTok{\textquotesingle{}yellow\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}purple\textquotesingle{}}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 0.05
\end{verbatim}

You can also compute the summed values for each row or each column using
the \texttt{addmargins} function:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{pTab }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{addmargins}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##         Obs2
## Obs      green orange purple  red yellow  Sum
##   green   0.01   0.05   0.01 0.05   0.06 0.18
##   orange  0.04   0.05   0.06 0.02   0.03 0.20
##   purple  0.03   0.08   0.06 0.02   0.02 0.21
##   red     0.06   0.04   0.05 0.04   0.03 0.22
##   yellow  0.06   0.06   0.03 0.03   0.01 0.19
##   Sum     0.20   0.28   0.21 0.16   0.15 1.00
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{sum}\NormalTok{(pTab[}\DecValTok{1}\NormalTok{,])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 0.18
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{sum}\NormalTok{(pTab[,}\DecValTok{2}\NormalTok{])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 0.28
\end{verbatim}

However, the table outputs in R are not appropriate for a formal report.
If you want to include a table in your report, you should use the kbl()
function to produce a formal table to display your data:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(kableExtra)}

\NormalTok{pTab }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{kbl}\NormalTok{(}\AttributeTok{booktabs =}\NormalTok{ T, }\AttributeTok{digits =} \DecValTok{2}\NormalTok{, }\AttributeTok{caption =} \StringTok{\textquotesingle{}Skittles Experiment Data\textquotesingle{}}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{kable\_styling}\NormalTok{(}\AttributeTok{latex\_options =} \FunctionTok{c}\NormalTok{(}\StringTok{\textquotesingle{}hold\_position\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}striped\textquotesingle{}}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{column\_spec}\NormalTok{(}\DecValTok{1}\NormalTok{, }\AttributeTok{bold =}\NormalTok{ T) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{row\_spec}\NormalTok{(}\DecValTok{0}\NormalTok{, }\AttributeTok{bold =}\NormalTok{ T)}
\end{Highlighting}
\end{Shaded}

\begin{table}[!h]

\caption{\label{tab:unnamed-chunk-12}Skittles Experiment Data}
\centering
\begin{tabular}[t]{>{}lrrrrr}
\toprule
\textbf{ } & \textbf{green} & \textbf{orange} & \textbf{purple} & \textbf{red} & \textbf{yellow}\\
\midrule
\textbf{\cellcolor{gray!6}{green}} & \cellcolor{gray!6}{0.01} & \cellcolor{gray!6}{0.05} & \cellcolor{gray!6}{0.01} & \cellcolor{gray!6}{0.05} & \cellcolor{gray!6}{0.06}\\
\textbf{orange} & 0.04 & 0.05 & 0.06 & 0.02 & 0.03\\
\textbf{\cellcolor{gray!6}{purple}} & \cellcolor{gray!6}{0.03} & \cellcolor{gray!6}{0.08} & \cellcolor{gray!6}{0.06} & \cellcolor{gray!6}{0.02} & \cellcolor{gray!6}{0.02}\\
\textbf{red} & 0.06 & 0.04 & 0.05 & 0.04 & 0.03\\
\textbf{\cellcolor{gray!6}{yellow}} & \cellcolor{gray!6}{0.06} & \cellcolor{gray!6}{0.06} & \cellcolor{gray!6}{0.03} & \cellcolor{gray!6}{0.03} & \cellcolor{gray!6}{0.01}\\
\bottomrule
\end{tabular}
\end{table}

\hypertarget{conditional-probability-data-write-up}{%
\subsection{Conditional Probability Data \&
Write-Up}\label{conditional-probability-data-write-up}}

Now let's import some data that we can use to demonstrate conditional
probability. We'll also write up our results neatly and talk about
in-line R coding.

Imagine that we want to investigate the relationship between med school
acceptance and academic performance. Specifically we will look at the
likelihood of acceptance (\(yes\) or \(no\)) is related to having higher
marks (e.g., above the 75th percentile or greater in our sample;
\(high\) or\ldots less high. We'll just say \(low\) for simplicity's
sake).

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{dat }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{\textquotesingle{}https://uoepsy.github.io/data/MedGPA.csv\textquotesingle{}}\NormalTok{)}
\FunctionTok{summary}\NormalTok{(dat)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##     Accept            Acceptance         Sex                 BCPM      
##  Length:55          Min.   :0.0000   Length:55          Min.   :2.410  
##  Class :character   1st Qu.:0.0000   Class :character   1st Qu.:3.260  
##  Mode  :character   Median :1.0000   Mode  :character   Median :3.530  
##                     Mean   :0.5455                      Mean   :3.501  
##                     3rd Qu.:1.0000                      3rd Qu.:3.755  
##                     Max.   :1.0000                      Max.   :4.000  
##                                                                        
##       GPA              VR               PS               WS        
##  Min.   :2.720   Min.   : 6.000   Min.   : 5.000   Min.   : 4.000  
##  1st Qu.:3.375   1st Qu.: 8.000   1st Qu.: 9.000   1st Qu.: 6.000  
##  Median :3.580   Median :10.000   Median :10.000   Median : 8.000  
##  Mean   :3.553   Mean   : 9.764   Mean   : 9.709   Mean   : 7.148  
##  3rd Qu.:3.770   3rd Qu.:11.000   3rd Qu.:10.500   3rd Qu.: 8.000  
##  Max.   :3.970   Max.   :13.000   Max.   :14.000   Max.   :10.000  
##                                                    NA's   :1       
##        BS              MCAT            Apps       
##  Min.   : 6.000   Min.   :18.00   Min.   : 1.000  
##  1st Qu.: 9.000   1st Qu.:34.00   1st Qu.: 5.000  
##  Median :10.000   Median :36.00   Median : 7.000  
##  Mean   : 9.782   Mean   :36.27   Mean   : 8.364  
##  3rd Qu.:11.000   3rd Qu.:39.00   3rd Qu.:11.000  
##  Max.   :14.000   Max.   :48.00   Max.   :24.000  
## 
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{dat}\SpecialCharTok{$}\NormalTok{acceptChar }\OtherTok{\textless{}{-}} \FunctionTok{ifelse}\NormalTok{(dat}\SpecialCharTok{$}\NormalTok{Acceptance }\SpecialCharTok{==} \StringTok{\textquotesingle{}0\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}Rejected\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}Accepted\textquotesingle{}}\NormalTok{)}
\NormalTok{dat}\SpecialCharTok{$}\NormalTok{GPAsplit }\OtherTok{\textless{}{-}} \FunctionTok{ifelse}\NormalTok{(dat}\SpecialCharTok{$}\NormalTok{GPA }\SpecialCharTok{\textgreater{}=} \FunctionTok{quantile}\NormalTok{(dat}\SpecialCharTok{$}\NormalTok{GPA)[}\StringTok{\textquotesingle{}75\%\textquotesingle{}}\NormalTok{], }\StringTok{\textquotesingle{}High\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}Low\textquotesingle{}}\NormalTok{)}

\NormalTok{pTab }\OtherTok{\textless{}{-}} \FunctionTok{table}\NormalTok{(dat}\SpecialCharTok{$}\NormalTok{GPAsplit, dat}\SpecialCharTok{$}\NormalTok{acceptChar) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{prop.table}\NormalTok{() }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{round}\NormalTok{(., }\DecValTok{2}\NormalTok{)}

\NormalTok{pTab}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##       
##        Accepted Rejected
##   High     0.25     0.02
##   Low      0.29     0.44
\end{verbatim}

Remember from yesterday's lecture that we can calculate conditional
probability using the following formula:

\[p(A|B) = \frac{p(A\cap B)}{p(B)}\]

Let's compare the probability of being accepted given that marks are
high with the probability given that marks are low. In other words, we
are comparing an outcome of event A across different levels of event B.
If these events were unrelated, we would expect the probability of event
A to be generally consistent across both levels of B. To do this, we can
plug our variables into the formula above:

\[p(Accepted|High) = \frac{p(Accepted\cap High)}{p(High)}\]

\[p(Accepted|Low) = \frac{p(Accepted\cap Low)}{p(Low)}\]

Remember, we can pull specific values from the probability table we've
created.

The probability of being accepted when marks are \texttt{high}:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{pTab[}\StringTok{\textquotesingle{}High\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}Accepted\textquotesingle{}}\NormalTok{]}\SpecialCharTok{/}\NormalTok{(}\FunctionTok{sum}\NormalTok{(pTab[}\StringTok{\textquotesingle{}High\textquotesingle{}}\NormalTok{,]))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 0.9259259
\end{verbatim}

The probability of being accepted when marks are \texttt{low}:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{pTab[}\StringTok{\textquotesingle{}Low\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}Accepted\textquotesingle{}}\NormalTok{]}\SpecialCharTok{/}\NormalTok{(}\FunctionTok{sum}\NormalTok{(pTab[}\StringTok{\textquotesingle{}Low\textquotesingle{}}\NormalTok{,]))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 0.3972603
\end{verbatim}

Here, we see that the values are quite different, which indicates that
the probability of acceptance is likely to be related to overall marks
(shocking!). Now let's show an example of how to write up these results.

\hypertarget{example-write-up}{%
\subsection{EXAMPLE WRITE-UP}\label{example-write-up}}

In this experiment, we collected data on medical school acceptance rates
and school performance from 55 participants. Specifically, we
investigated whether acceptance to medical school was related to overall
performance as measured by GPA (High/Low). We calculated the proportion
of participants who fell into each category (see Table 2).

\begin{table}[!h]

\caption{\label{tab:unnamed-chunk-16}Medical School Acceptance by GPA}
\centering
\begin{tabular}[t]{>{}lrr}
\toprule
\textbf{ } & \textbf{Accepted} & \textbf{Rejected}\\
\midrule
\textbf{\cellcolor{gray!6}{High}} & \cellcolor{gray!6}{0.25} & \cellcolor{gray!6}{0.02}\\
\textbf{Low} & 0.29 & 0.44\\
\bottomrule
\end{tabular}
\end{table}

We computed the probability of acceptance at both levels of GPA.
\(P(Acceptance|GPA_{high}) =\) 0.93. \(P(Acceptance|GPA_{low}) =\) 0.4.
This indicates that the likelihood of being accepted changes at
different levels of GPA.

The differences in the probability of acceptance across levels of GPA
indicate a possible relationship between school performance and
acceptance to medical school.

\end{document}
